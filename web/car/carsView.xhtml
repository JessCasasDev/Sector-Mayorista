<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <head>
        <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
         <!--Import materialize.css-->
        <link type="text/css" rel="stylesheet" href="../css/materialize.min.css"  media="screen,projection"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Profile</title>
   
    </head>
    <body class="light-blue lighten-4">
        <!--MENU-->
             <nav>
            <div class="nav-wrapper blue darken-4">
                <a href="../index.xhtml" class="brand-logo">Automarket</a>
                <ul id="nav-mobile" class="right blue darken-4">
                    <li class="blue-text text-lighten-3"><a href="#">Automóviles</a></li>
                    <li class="blue-text text-lighten-3"><a href="../client/shopping_cart.xhtml">Carrito de Compra</a></li>
                    <li class="blue-text text-lighten-3"><a href="#">Compras</a></li>
                    <li class="blue-text text-lighten-3"><a href="../client/client_profile.xhtml">Perfil</a></li>
                </ul>
            </div>
  </nav>    
         <center>
              <h1 class="blue-grey-text text-darken-2 col s12">Lista de Autos disponibles</h1>
            
               
   
                  <h:dataTable var="item" value="#{viewCarsBean2.findAll()}" cellspacing="2">
                      <h:column>
                          <f:facet name="header" >
                             <!-- sort test <h:commandLink action="#{viewCarsBean2.sortById()}" >
                                #id
                             <> </h:commandLink> -->
                              Id
                          </f:facet>
                          <h:outputText value="#{item.vehicleId}"></h:outputText>
                      </h:column>
                      <h:column>
                          <f:facet name="header">Modelo</f:facet>
                          <h:outputText value="#{item.model}"></h:outputText>
                      </h:column>
                      <h:column>
                          <f:facet name="header">Marca</f:facet>
                          <h:outputText value="#{item.brand}"></h:outputText>
                      </h:column>
                      <h:column>
                          <f:facet name="header">Color</f:facet>
                          <h:outputText value="#{item.color}"></h:outputText>
                      </h:column>
                      <h:column>
                          <f:facet name="header">Descripcion</f:facet>
                          <h:outputText value="#{item.description}"></h:outputText>
                      </h:column>
                      <h:column>
                          <f:facet name="header">Precio por unidad</f:facet>
                          <h:outputText value="#{item.sellPrice}"></h:outputText>
                      </h:column>
                      <h:column>
                          <f:facet name="header">Tipo</f:facet>
                          <div>#{item.sellPrice}</div>
                      </h:column>
                      <h:column>
                          <ui:param name="quantity" value="#{viewCarsBean2.totalAvaliableCars(item.vehicleId)}" />
                          <f:facet name="header">Disponibles</f:facet>
                          <p>
                              <div>#{quantity}</div>
                          </p>
                      </h:column>
                       <h:column>
                           <f:facet name="header">Cantidad</f:facet>
                           <h:form>                              
                          <p>
                              <h:inputText  value="#{shoppingCartBean.quantity}"  onkeypress="if(event.which &lt; 48 || event.which &gt; 57) return false;" class="center-align"   ></h:inputText>
                              <h:inputHidden value="#{shoppingCartBean.vehicleId}"></h:inputHidden>
                          <label >Seleccionar Cantidad</label>
                          <a class="waves-effect waves-light btn modal-trigger right" href="#msg">
                          <h:commandButton  action="#{shoppingCartBean.addVehiclesToCart(item.vehicleId,quantity)}" value="Añadir Autos"/>
                          </a>
                          </p>
                           </h:form>
                      </h:column>
                       <h:column>
                          <f:facet name="header"></f:facet>
                          
                      </h:column>
                  </h:dataTable>
                 <div id="msg" class="modal">
                    <div class="modal-content">
                        <h4>Modal Header</h4>
                    <p>A bunch of text</p>        
                    </div>
                 </div>
              
          </center>        
        <!-- JS FILES-->
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="js/materialize.min.js"></script>
        <script type="text/javascript" src="js/ini.js"></script>
    </body>
</html>

